{"ast":null,"code":"var sys = require(\"util\"),\n    assert = require(\"assert\"),\n    XMLHttpRequest = require(\"../lib/XMLHttpRequest\").XMLHttpRequest,\n    xhr = new XMLHttpRequest(),\n    http = require(\"http\"); // Test server\n\n\nvar server = http.createServer(function (req, res) {\n  if (req.url === '/redirectingResource') {\n    res.writeHead(307, {\n      'Location': 'http://localhost:8000/'\n    });\n    res.end();\n    return;\n  }\n\n  assert.equal(req.method, 'POST');\n  var body = \"Hello World\";\n  res.writeHead(200, {\n    \"Content-Type\": \"text/plain\",\n    \"Content-Length\": Buffer.byteLength(body),\n    \"Date\": \"Thu, 30 Aug 2012 18:17:53 GMT\",\n    \"Connection\": \"close\"\n  });\n  res.write(\"Hello World\");\n  res.end();\n  this.close();\n}).listen(8000);\n\nxhr.onreadystatechange = function () {\n  if (this.readyState == 4) {\n    assert.equal(xhr.getRequestHeader('Location'), '');\n    assert.equal(xhr.responseText, \"Hello World\");\n    console.log(\"done\");\n  }\n};\n\ntry {\n  xhr.open(\"POST\", \"http://localhost:8000/redirectingResource\");\n  xhr.send();\n} catch (e) {\n  console.log(\"ERROR: Exception raised\", e);\n}","map":{"version":3,"sources":["/Users/limia/Desktop/Dummy Admin Temp/package/frontend/node_modules/xmlhttprequest-ssl/tests/test-redirect-307.js"],"names":["sys","require","assert","XMLHttpRequest","xhr","http","server","createServer","req","res","url","writeHead","end","equal","method","body","Buffer","byteLength","write","close","listen","onreadystatechange","readyState","getRequestHeader","responseText","console","log","open","send","e"],"mappings":"AAAA,IAAIA,GAAG,GAAGC,OAAO,CAAC,MAAD,CAAjB;AAAA,IACIC,MAAM,GAAGD,OAAO,CAAC,QAAD,CADpB;AAAA,IAEIE,cAAc,GAAGF,OAAO,CAAC,uBAAD,CAAP,CAAiCE,cAFtD;AAAA,IAGIC,GAAG,GAAG,IAAID,cAAJ,EAHV;AAAA,IAIIE,IAAI,GAAGJ,OAAO,CAAC,MAAD,CAJlB,C,CAMA;;;AACA,IAAIK,MAAM,GAAGD,IAAI,CAACE,YAAL,CAAkB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACjD,MAAID,GAAG,CAACE,GAAJ,KAAY,sBAAhB,EAAwC;AACtCD,IAAAA,GAAG,CAACE,SAAJ,CAAc,GAAd,EAAmB;AAAC,kBAAY;AAAb,KAAnB;AACAF,IAAAA,GAAG,CAACG,GAAJ;AACA;AACD;;AAEDV,EAAAA,MAAM,CAACW,KAAP,CAAaL,GAAG,CAACM,MAAjB,EAAyB,MAAzB;AAEA,MAAIC,IAAI,GAAG,aAAX;AACAN,EAAAA,GAAG,CAACE,SAAJ,CAAc,GAAd,EAAmB;AACjB,oBAAgB,YADC;AAEjB,sBAAkBK,MAAM,CAACC,UAAP,CAAkBF,IAAlB,CAFD;AAGjB,YAAQ,+BAHS;AAIjB,kBAAc;AAJG,GAAnB;AAMAN,EAAAA,GAAG,CAACS,KAAJ,CAAU,aAAV;AACAT,EAAAA,GAAG,CAACG,GAAJ;AAEA,OAAKO,KAAL;AACD,CApBY,EAoBVC,MApBU,CAoBH,IApBG,CAAb;;AAsBAhB,GAAG,CAACiB,kBAAJ,GAAyB,YAAW;AAClC,MAAI,KAAKC,UAAL,IAAmB,CAAvB,EAA0B;AACxBpB,IAAAA,MAAM,CAACW,KAAP,CAAaT,GAAG,CAACmB,gBAAJ,CAAqB,UAArB,CAAb,EAA+C,EAA/C;AACArB,IAAAA,MAAM,CAACW,KAAP,CAAaT,GAAG,CAACoB,YAAjB,EAA+B,aAA/B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACD;AACF,CAND;;AAQA,IAAI;AACFtB,EAAAA,GAAG,CAACuB,IAAJ,CAAS,MAAT,EAAiB,2CAAjB;AACAvB,EAAAA,GAAG,CAACwB,IAAJ;AACD,CAHD,CAGE,OAAMC,CAAN,EAAS;AACTJ,EAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCG,CAAvC;AACD","sourcesContent":["var sys = require(\"util\")\n  , assert = require(\"assert\")\n  , XMLHttpRequest = require(\"../lib/XMLHttpRequest\").XMLHttpRequest\n  , xhr = new XMLHttpRequest()\n  , http = require(\"http\");\n\n// Test server\nvar server = http.createServer(function (req, res) {\n  if (req.url === '/redirectingResource') {\n    res.writeHead(307, {'Location': 'http://localhost:8000/'});\n    res.end();\n    return;\n  }\n\n  assert.equal(req.method, 'POST');\n\n  var body = \"Hello World\";\n  res.writeHead(200, {\n    \"Content-Type\": \"text/plain\",\n    \"Content-Length\": Buffer.byteLength(body),\n    \"Date\": \"Thu, 30 Aug 2012 18:17:53 GMT\",\n    \"Connection\": \"close\"\n  });\n  res.write(\"Hello World\");\n  res.end();\n\n  this.close();\n}).listen(8000);\n\nxhr.onreadystatechange = function() {\n  if (this.readyState == 4) {\n    assert.equal(xhr.getRequestHeader('Location'), '');\n    assert.equal(xhr.responseText, \"Hello World\");\n    console.log(\"done\");\n  }\n};\n\ntry {\n  xhr.open(\"POST\", \"http://localhost:8000/redirectingResource\");\n  xhr.send();\n} catch(e) {\n  console.log(\"ERROR: Exception raised\", e);\n}\n"]},"metadata":{},"sourceType":"script"}