{"ast":null,"code":"import path from \"path\";\nimport express from \"express\";\nimport multer from \"multer\";\nconst router = express.Router();\nconst storage = multer.diskStorage({\n  destination(req, file, cb) {\n    cb(null, \"./backend/Imgupload\");\n  },\n\n  filename(req, file, cb) {\n    cb(null, `${file.fieldname}-${Date.now()}${path.extname(file.originalname)}`);\n  }\n\n});\n\nfunction checkFileType(file, cb) {\n  const filetypes = /jpg|jpeg|png/;\n  const extname = filetypes.test(path.extname(file.originalname).toLowerCase());\n  const mimetype = filetypes.test(file.mimetype);\n\n  if (extname && mimetype) {\n    return cb(null, true);\n  } else {\n    cb(\"Images only!\");\n  }\n}\n\nconst upload = multer({\n  storage,\n  fileFilter: function (req, file, cb) {\n    checkFileType(file, cb);\n  }\n});\nrouter.post(\"/\", upload.single(\"image\"), (req, res) => {\n  res.send(`/${req.file.path}`);\n  console.log(\"req.file.path :\", req.file.path);\n});\nexport default router;","map":{"version":3,"sources":["/Users/limia/Desktop/Dummy Admin Temp/package/backend/routes/uploadRoutes.js"],"names":["path","express","multer","router","Router","storage","diskStorage","destination","req","file","cb","filename","fieldname","Date","now","extname","originalname","checkFileType","filetypes","test","toLowerCase","mimetype","upload","fileFilter","post","single","res","send","console","log"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAf;AAEA,MAAMC,OAAO,GAAGH,MAAM,CAACI,WAAP,CAAmB;AACjCC,EAAAA,WAAW,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAgB;AACzBA,IAAAA,EAAE,CAAC,IAAD,EAAO,qBAAP,CAAF;AACD,GAHgC;;AAIjCC,EAAAA,QAAQ,CAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAgB;AACtBA,IAAAA,EAAE,CACA,IADA,EAEC,GAAED,IAAI,CAACG,SAAU,IAAGC,IAAI,CAACC,GAAL,EAAW,GAAEd,IAAI,CAACe,OAAL,CAAaN,IAAI,CAACO,YAAlB,CAAgC,EAFlE,CAAF;AAID;;AATgC,CAAnB,CAAhB;;AAYA,SAASC,aAAT,CAAuBR,IAAvB,EAA6BC,EAA7B,EAAiC;AAC/B,QAAMQ,SAAS,GAAG,cAAlB;AACA,QAAMH,OAAO,GAAGG,SAAS,CAACC,IAAV,CAAenB,IAAI,CAACe,OAAL,CAAaN,IAAI,CAACO,YAAlB,EAAgCI,WAAhC,EAAf,CAAhB;AACA,QAAMC,QAAQ,GAAGH,SAAS,CAACC,IAAV,CAAeV,IAAI,CAACY,QAApB,CAAjB;;AAEA,MAAIN,OAAO,IAAIM,QAAf,EAAyB;AACvB,WAAOX,EAAE,CAAC,IAAD,EAAO,IAAP,CAAT;AACD,GAFD,MAEO;AACLA,IAAAA,EAAE,CAAC,cAAD,CAAF;AACD;AACF;;AAED,MAAMY,MAAM,GAAGpB,MAAM,CAAC;AACpBG,EAAAA,OADoB;AAEpBkB,EAAAA,UAAU,EAAE,UAAUf,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACnCO,IAAAA,aAAa,CAACR,IAAD,EAAOC,EAAP,CAAb;AACD;AAJmB,CAAD,CAArB;AAOAP,MAAM,CAACqB,IAAP,CAAY,GAAZ,EAAiBF,MAAM,CAACG,MAAP,CAAc,OAAd,CAAjB,EAAyC,CAACjB,GAAD,EAAMkB,GAAN,KAAc;AACrDA,EAAAA,GAAG,CAACC,IAAJ,CAAU,IAAGnB,GAAG,CAACC,IAAJ,CAAST,IAAK,EAA3B;AACA4B,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BrB,GAAG,CAACC,IAAJ,CAAST,IAAxC;AACD,CAHD;AAKA,eAAeG,MAAf","sourcesContent":["import path from \"path\";\r\nimport express from \"express\";\r\nimport multer from \"multer\";\r\nconst router = express.Router();\r\n\r\nconst storage = multer.diskStorage({\r\n  destination(req, file, cb) {\r\n    cb(null, \"./backend/Imgupload\");\r\n  },\r\n  filename(req, file, cb) {\r\n    cb(\r\n      null,\r\n      `${file.fieldname}-${Date.now()}${path.extname(file.originalname)}`\r\n    );\r\n  },\r\n});\r\n\r\nfunction checkFileType(file, cb) {\r\n  const filetypes = /jpg|jpeg|png/;\r\n  const extname = filetypes.test(path.extname(file.originalname).toLowerCase());\r\n  const mimetype = filetypes.test(file.mimetype);\r\n\r\n  if (extname && mimetype) {\r\n    return cb(null, true);\r\n  } else {\r\n    cb(\"Images only!\");\r\n  }\r\n}\r\n\r\nconst upload = multer({\r\n  storage,\r\n  fileFilter: function (req, file, cb) {\r\n    checkFileType(file, cb);\r\n  },\r\n});\r\n\r\nrouter.post(\"/\", upload.single(\"image\"), (req, res) => {\r\n  res.send(`/${req.file.path}`);\r\n  console.log(\"req.file.path :\", req.file.path);\r\n});\r\n\r\nexport default router;\r\n"]},"metadata":{},"sourceType":"module"}